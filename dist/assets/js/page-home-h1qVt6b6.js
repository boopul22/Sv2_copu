var U=(i,v,o)=>new Promise((b,t)=>{var g=m=>{try{u(o.next(m))}catch(p){t(p)}},h=m=>{try{u(o.throw(m))}catch(p){t(p)}},u=m=>m.done?b(m.value):Promise.resolve(m.value).then(g,h);u((o=o.apply(i,v)).next())});import{r,c as R,j as e}from"./react-vendor-DV45Ikwi.js";import{c as A}from"./utils-9Fb_5NIc.js";import{S as M,H as I,O as z,a as F}from"./components-COn4n8qM.js";import"./vendor-B0T_4ch3.js";import"./supabase-vendor-CPNJAKHt.js";const O=({searchQuery:i})=>{const v=R(),[o,b]=r.useState([]),[t,g]=r.useState(!0),[h,u]=r.useState(null),[m,p]=r.useState(!0),[k,D]=r.useState(0),[f,V]=r.useState("all"),j=12;r.useEffect(()=>{x(!0)},[i,f]);const w=r.useCallback(s=>{V(s),x(!0)},[]),x=r.useCallback((s=!1)=>U(null,null,function*(){try{g(!0),u(null);let a=yield A();if(f!=="all"&&(a=a.filter(l=>{var d;return((d=l.categories)==null?void 0:d.slug)===f})),i&&i.trim()){const l=i.toLowerCase();a=a.filter(d=>{var E,H;return d.title.toLowerCase().includes(l)||((E=d.excerpt)==null?void 0:E.toLowerCase().includes(l))||((H=d.content)==null?void 0:H.toLowerCase().includes(l))})}const c=(s?0:k)*j,N=c+j,_=a.slice(c,N),$=N<a.length;s?(b(_),D(1)):(b(l=>[...l,..._]),D(l=>l+1)),p($)}catch(a){u("Failed to load posts")}finally{g(!1)}}),[k,i,f]);if(t&&o.length===0)return e.jsxDEV("div",{className:"main-grid",children:e.jsxDEV(M,{type:"post",count:6},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:81,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:80,columnNumber:7},void 0);if(h)return e.jsxDEV("div",{className:"main-grid",children:e.jsxDEV("div",{className:"error",children:h},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:89,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:88,columnNumber:7},void 0);if(o.length===0&&!t)return e.jsxDEV("div",{className:"main-grid",children:e.jsxDEV("div",{className:"loading",children:i?`No posts found for "${i}"`:"No posts available"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:97,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:96,columnNumber:7},void 0);const C=s=>new Date(s).toLocaleDateString("hi-IN",{year:"numeric",month:"long",day:"numeric"}),y=()=>Math.floor(Math.random()*500)+50,S=s=>{const a=y();alert(`शायरी को ${a} लाइक मिले!`)},L=s=>{var n;const a=`${s.title}

${s.excerpt}

- ${((n=s.users)==null?void 0:n.display_name)||"Admin"}

शायरी ब्लॉग से साझा किया गया`;navigator.share?navigator.share({title:s.title,text:a,url:window.location.href}).catch(c=>{}):navigator.clipboard.writeText(a).then(()=>{alert("शायरी क्लिपबोर्ड में कॉपी हो गई!")}).catch(()=>{alert(`शायरी साझा करें:

${a}`)})},P=s=>{v(`/${s.slug}`)};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(I,{},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:147,columnNumber:7},void 0),e.jsxDEV("main",{className:"main-content",children:e.jsxDEV("div",{className:"container",children:e.jsxDEV("div",{className:"content-layout",children:[e.jsxDEV("div",{className:"shayari-grid",children:[e.jsxDEV("h3",{className:"section-title",children:"Latest शायरी"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:155,columnNumber:15},void 0),e.jsxDEV("div",{className:"cards-grid",id:"shayariGrid",children:o.length>0?o.map(s=>{var a,n,c,N;return e.jsxDEV("div",{className:"shayari-card",children:[s.featured_image_url?e.jsxDEV("div",{className:"card-image",children:e.jsxDEV(z,{src:s.featured_image_url,alt:s.title,width:400,height:200,lazy:!0,priority:!1,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 400px",aspectRatio:"2/1",style:{width:"100%",height:"auto",borderRadius:"8px",marginBottom:"15px"}},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:163,columnNumber:27},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:162,columnNumber:25},void 0):e.jsxDEV("div",{className:"card-image-placeholder"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:181,columnNumber:25},void 0),e.jsxDEV("h3",{className:"card-title",children:s.title},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:183,columnNumber:23},void 0),e.jsxDEV("p",{className:"card-author",children:["लेखक: ",((a=s.users)==null?void 0:a.display_name)||"Admin"]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:184,columnNumber:23},void 0),e.jsxDEV("p",{className:"card-excerpt",children:s.excerpt},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:185,columnNumber:23},void 0),e.jsxDEV("div",{className:"card-meta",children:[e.jsxDEV("span",{className:"card-category",children:((N=(c=(n=s.post_categories)==null?void 0:n[0])==null?void 0:c.categories)==null?void 0:N.name)||"शायरी"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:187,columnNumber:25},void 0),e.jsxDEV("span",{className:"card-date",children:C(s.published_at)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:190,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:186,columnNumber:23},void 0),e.jsxDEV("div",{className:"card-actions",children:[e.jsxDEV("div",{className:"card-engagement",children:[e.jsxDEV("button",{className:"like-count",onClick:()=>S(),children:["❤️ ",e.jsxDEV("span",{children:y()},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:198,columnNumber:32},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:194,columnNumber:27},void 0),e.jsxDEV("button",{className:"share-btn",onClick:()=>L(s),children:"📤 Share"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:200,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:193,columnNumber:25},void 0),e.jsxDEV("button",{className:"btn btn--sm btn--primary",onClick:()=>P(s),children:"पढ़ें"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:207,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:192,columnNumber:23},void 0)]},s.id,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:160,columnNumber:21},void 0)}):e.jsxDEV("div",{className:"no-results",children:[e.jsxDEV("h3",{children:"कोई शायरी नहीं मिली"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:218,columnNumber:21},void 0),e.jsxDEV("p",{children:"कृपया अपनी खोज या फ़िल्टर बदलें"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:219,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:217,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:157,columnNumber:15},void 0),m&&e.jsxDEV("div",{className:"load-more-container",children:e.jsxDEV("button",{onClick:()=>x(!1),disabled:t,className:"btn btn--outline",children:t?"Loading...":"Load More शायरी"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:227,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:226,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:154,columnNumber:13},void 0),e.jsxDEV(F,{selectedCategory:f,onCategoryChange:w},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:239,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:152,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:151,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:150,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/homepage/pages/Home.jsx",lineNumber:145,columnNumber:5},void 0)},W=r.memo(O);export{W as default};
