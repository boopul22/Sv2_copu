var U=(r,g,l)=>new Promise((f,m)=>{var v=o=>{try{t(l.next(o))}catch(p){m(p)}},x=o=>{try{t(l.throw(o))}catch(p){m(p)}},t=o=>o.done?f(o.value):Promise.resolve(o.value).then(v,x);t((l=l.apply(r,g)).next())});import{r as a,c as R,j as e}from"./react-vendor-DV45Ikwi.js";import{c as A}from"./utils-9Fb_5NIc.js";import{S as M,H as I,O as z,a as F}from"./components-BN_Ihx4k.js";import"./vendor-B0T_4ch3.js";import"./supabase-vendor-CPNJAKHt.js";const O=({searchQuery:r})=>{const g=R(),[l,f]=a.useState([]),[m,v]=a.useState(!0),[x,t]=a.useState(null),[o,p]=a.useState(!0),[D,j]=a.useState(0),[N,V]=a.useState("all"),h=12;a.useEffect(()=>{k(!0)},[r,N]);const w=a.useCallback(s=>{V(s),k(!0)},[]),k=a.useCallback((s=!1)=>U(null,null,function*(){try{v(!0),t(null);let i=yield A();if(N!=="all"&&(i=i.filter(n=>{var d;return((d=n.categories)==null?void 0:d.slug)===N})),r&&r.trim()){const n=r.toLowerCase();i=i.filter(d=>{var E,H;return d.title.toLowerCase().includes(n)||((E=d.excerpt)==null?void 0:E.toLowerCase().includes(n))||((H=d.content)==null?void 0:H.toLowerCase().includes(n))})}const c=(s?0:D)*h,b=c+h,_=i.slice(c,b),$=b<i.length;s?(f(_),j(1)):(f(n=>[...n,..._]),j(n=>n+1)),p($)}catch(i){t("Failed to load posts")}finally{v(!1)}}),[D,r,N]);if(m&&l.length===0)return e.jsxDEV("div",{className:"main-grid",children:e.jsxDEV(M,{type:"post",count:6},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:81,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:80,columnNumber:7},void 0);if(x)return e.jsxDEV("div",{className:"main-grid",children:e.jsxDEV("div",{className:"error",children:x},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:89,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:88,columnNumber:7},void 0);if(l.length===0&&!m)return e.jsxDEV("div",{className:"main-grid",children:e.jsxDEV("div",{className:"loading",children:r?`No posts found for "${r}"`:"No posts available"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:97,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:96,columnNumber:7},void 0);const C=s=>new Date(s).toLocaleDateString("hi-IN",{year:"numeric",month:"long",day:"numeric"}),y=()=>Math.floor(Math.random()*500)+50,S=s=>{const i=y();alert(`शायरी को ${i} लाइक मिले!`)},L=s=>{var u;const i=`${s.title}

${s.excerpt}

- ${((u=s.users)==null?void 0:u.display_name)||"Admin"}

शायरी ब्लॉग से साझा किया गया`;navigator.share?navigator.share({title:s.title,text:i,url:window.location.href}).catch(c=>{}):navigator.clipboard.writeText(i).then(()=>{alert("शायरी क्लिपबोर्ड में कॉपी हो गई!")}).catch(()=>{alert(`शायरी साझा करें:

${i}`)})},P=s=>{g(`/${s.slug}`)};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(I,{},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:147,columnNumber:7},void 0),e.jsxDEV("main",{className:"main-content",children:e.jsxDEV("div",{className:"container",children:e.jsxDEV("div",{className:"content-layout",children:[e.jsxDEV("div",{className:"shayari-grid",children:[e.jsxDEV("h3",{className:"section-title",children:"Latest शायरी"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:155,columnNumber:15},void 0),e.jsxDEV("div",{className:"cards-grid",id:"shayariGrid",children:l.length>0?l.map(s=>{var i,u,c,b;return e.jsxDEV("div",{className:"shayari-card",children:[s.featured_image_url?e.jsxDEV("div",{className:"card-image",children:e.jsxDEV(z,{src:s.featured_image_url,alt:s.title,width:400,height:200,lazy:!0,priority:!1,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 400px",aspectRatio:"2/1",style:{width:"100%",height:"auto",borderRadius:"8px",marginBottom:"15px"}},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:163,columnNumber:27},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:162,columnNumber:25},void 0):e.jsxDEV("div",{className:"card-image-placeholder"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:181,columnNumber:25},void 0),e.jsxDEV("h3",{className:"card-title",children:s.title},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:183,columnNumber:23},void 0),e.jsxDEV("p",{className:"card-author",children:["लेखक: ",((i=s.users)==null?void 0:i.display_name)||"Admin"]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:184,columnNumber:23},void 0),e.jsxDEV("p",{className:"card-excerpt",children:s.excerpt},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:185,columnNumber:23},void 0),e.jsxDEV("div",{className:"card-meta",children:[e.jsxDEV("span",{className:"card-category",children:((b=(c=(u=s.post_categories)==null?void 0:u[0])==null?void 0:c.categories)==null?void 0:b.name)||"शायरी"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:187,columnNumber:25},void 0),e.jsxDEV("span",{className:"card-date",children:C(s.published_at)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:190,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:186,columnNumber:23},void 0),e.jsxDEV("div",{className:"card-actions",children:[e.jsxDEV("div",{className:"card-engagement",children:[e.jsxDEV("button",{className:"like-count",onClick:()=>S(),children:["❤️ ",e.jsxDEV("span",{children:y()},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:198,columnNumber:32},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:194,columnNumber:27},void 0),e.jsxDEV("button",{className:"share-btn",onClick:()=>L(s),children:"📤 Share"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:200,columnNumber:27},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:193,columnNumber:25},void 0),e.jsxDEV("button",{className:"btn btn--sm btn--primary",onClick:()=>P(s),children:"पढ़ें"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:207,columnNumber:25},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:192,columnNumber:23},void 0)]},s.id,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:160,columnNumber:21},void 0)}):e.jsxDEV("div",{className:"no-results",children:[e.jsxDEV("h3",{children:"कोई शायरी नहीं मिली"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:218,columnNumber:21},void 0),e.jsxDEV("p",{children:"कृपया अपनी खोज या फ़िल्टर बदलें"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:219,columnNumber:21},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:217,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:157,columnNumber:15},void 0),o&&e.jsxDEV("div",{className:"load-more-container",children:e.jsxDEV("button",{onClick:()=>k(!1),disabled:m,className:"btn btn--outline",children:m?"Loading...":"Load More शायरी"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:227,columnNumber:19},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:226,columnNumber:17},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:154,columnNumber:13},void 0),e.jsxDEV(F,{selectedCategory:N,onCategoryChange:w},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:239,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:152,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:151,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:150,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/Home.jsx",lineNumber:145,columnNumber:5},void 0)},W=a.memo(O);export{W as default};
