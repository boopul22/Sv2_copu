var v=(a,n,o)=>new Promise((c,d)=>{var u=l=>{try{r(o.next(l))}catch(m){d(m)}},p=l=>{try{r(o.throw(l))}catch(m){d(m)}},r=l=>l.done?c(l.value):Promise.resolve(l.value).then(u,p);r((o=o.apply(a,n)).next())});import{c as S,r as t,j as e,L as N}from"./react-vendor-QWuLYCV5.js";import{z as E,A as _}from"./utils-AGEL3kgC.js";import"./components-Cql90Mvf.js";import"./vendor-CJchTyIO.js";import"./supabase-vendor-DEo8APS7.js";const B=()=>{const{slug:a}=S(),[n,o]=t.useState(null),[c,d]=t.useState([]),[u,p]=t.useState([]),[r,l]=t.useState([]),[m,f]=t.useState(!0),[b,D]=t.useState(null);t.useEffect(()=>{a&&k()},[a]);const k=()=>v(null,null,function*(){try{f(!0);const s=yield E(a);if(!s)throw new Error("Post not found");o(s);const x=(yield _()).filter(g=>g.id!==s.id).slice(0,3);d(x),p(s.categories||[]),l(s.tags||[])}catch(s){D("Post not found")}finally{f(!1)}}),j=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),y=s=>{if(!s)return"";let i=s.replace(/<!-- wp:.*? -->/g,"");return i=i.replace(/<!-- \/wp:.*? -->/g,""),i=i.replace(/class="[^"]*wp-[^"]*"/g,""),i=i.replace(/class="[^"]*has-[^"]*"/g,""),i=i.replace(/style="[^"]*text-transform:[^"]*"/g,""),i=i.replace(/<img([^>]*)src="([^"]*)"([^>]*)>/g,(x,g,h,P)=>`<img${g}src="${h}"${P} loading="lazy" decoding="async" style="max-width: 100%; height: auto; margin: 20px 0; border-radius: 8px;" sizes="(max-width: 768px) 100vw, 800px">`),i=i.replace(/<h([1-6])([^>]*)>/g,'<h$1$2 style="margin: 30px 0 20px 0;">'),i=i.replace(/<blockquote([^>]*)>/g,'<blockquote$1 style="margin: 20px 0; padding: 15px 20px; border-left: 4px solid #ddd; background: #f9f9f9; font-style: italic;">'),i.trim()};return m?e.jsxDEV("div",{className:"single-poem-grid",children:e.jsxDEV("div",{className:"loading",children:"Loading post..."},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:93,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:92,columnNumber:7},void 0):b||!n?e.jsxDEV("div",{className:"single-poem-grid",children:e.jsxDEV("div",{className:"error",children:b||"Post not found"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:101,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:100,columnNumber:7},void 0):e.jsxDEV("div",{className:"single-poem-grid",children:[e.jsxDEV("div",{className:"poem-content",children:[e.jsxDEV("div",{className:"poem-full-title",children:n.title},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:109,columnNumber:9},void 0),e.jsxDEV("div",{className:"poem-meta",style:{marginBottom:"30px"},children:[e.jsxDEV("div",{className:"author",children:"By Admin"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:111,columnNumber:11},void 0),e.jsxDEV("div",{className:"date",style:{marginLeft:"20px"},children:j(n.published_at)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:112,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:110,columnNumber:9},void 0),e.jsxDEV("div",{className:"poem-text",dangerouslySetInnerHTML:{__html:y(n.content)}},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:116,columnNumber:9},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:108,columnNumber:7},void 0),e.jsxDEV("div",{className:"poem-sidebar",children:[u.length>0&&e.jsxDEV("div",{className:"sidebar-section",children:[e.jsxDEV("div",{className:"sidebar-title",children:"Categories"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:125,columnNumber:13},void 0),e.jsxDEV("div",{className:"sidebar-content",children:u.map((s,i)=>e.jsxDEV("span",{children:[e.jsxDEV(N,{to:`/category/${s.slug}`,style:{color:"#666",textDecoration:"none"},children:s.name},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:129,columnNumber:19},void 0),i<u.length-1&&", "]},s.id,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:128,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:126,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:124,columnNumber:11},void 0),r.length>0&&e.jsxDEV("div",{className:"sidebar-section",children:[e.jsxDEV("div",{className:"sidebar-title",children:"Tags"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:144,columnNumber:13},void 0),e.jsxDEV("div",{className:"sidebar-content",children:r.map((s,i)=>e.jsxDEV("span",{children:[e.jsxDEV(N,{to:`/tag/${s.slug}`,style:{color:"#666",textDecoration:"none"},children:s.name},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:148,columnNumber:19},void 0),i<r.length-1&&", "]},s.id,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:147,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:145,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:143,columnNumber:11},void 0),c.length>0&&e.jsxDEV("div",{className:"sidebar-section",children:[e.jsxDEV("div",{className:"sidebar-title",children:"Related Posts"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:163,columnNumber:13},void 0),e.jsxDEV("div",{className:"sidebar-content",children:c.map(s=>e.jsxDEV("div",{style:{marginBottom:"10px"},children:e.jsxDEV(N,{to:`/${s.slug}`,style:{color:"#666",textDecoration:"none",fontSize:"13px",display:"block"},children:s.title},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:167,columnNumber:19},void 0)},s.id,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:166,columnNumber:17},void 0))},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:164,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:162,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:122,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/pages/SinglePost.jsx",lineNumber:107,columnNumber:5},void 0)};export{B as default};
