var f=(o,l,t)=>new Promise((c,a)=>{var n=r=>{try{i(t.next(r))}catch(e){a(e)}},p=r=>{try{i(t.throw(r))}catch(e){a(e)}},i=r=>r.done?c(r.value):Promise.resolve(r.value).then(n,p);i((t=t.apply(o,l)).next())});import{r as d,j as s,L as b}from"./react-vendor-DV45Ikwi.js";import{h as N}from"./utils-BE2o5J05.js";import"./vendor-B0T_4ch3.js";import"./supabase-vendor-CPNJAKHt.js";const k=({searchQuery:o})=>{const[l,t]=d.useState([]),[c,a]=d.useState(!0),[n,p]=d.useState(null);d.useEffect(()=>{i()},[o]);const i=()=>f(null,null,function*(){try{a(!0);let e=yield N();if(o&&o.trim()){const u=o.toLowerCase();e=e.filter(m=>m.display_name.toLowerCase().includes(u)||m.username.toLowerCase().includes(u))}e.sort((u,m)=>(m.post_count||0)-(u.post_count||0)),t(e)}catch(e){p("Failed to load authors")}finally{a(!1)}}),r=e=>e?e.split(" ").map(u=>u.charAt(0)).join("").toUpperCase().substring(0,2):"A";return c?s.jsxDEV("div",{className:"author-grid",children:s.jsxDEV("div",{className:"loading",children:"Loading authors..."},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/browse/pages/Authors.jsx",lineNumber:57,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/browse/pages/Authors.jsx",lineNumber:56,columnNumber:7},void 0):n?s.jsxDEV("div",{className:"author-grid",children:s.jsxDEV("div",{className:"error",children:n},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/browse/pages/Authors.jsx",lineNumber:65,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/browse/pages/Authors.jsx",lineNumber:64,columnNumber:7},void 0):l.length===0?s.jsxDEV("div",{className:"author-grid",children:s.jsxDEV("div",{className:"loading",children:o?`No authors found for "${o}"`:"No authors available"},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/browse/pages/Authors.jsx",lineNumber:73,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/browse/pages/Authors.jsx",lineNumber:72,columnNumber:7},void 0):s.jsxDEV("div",{className:"author-grid",children:l.map(e=>s.jsxDEV(b,{to:`/author/${e.username}`,className:"author-card",children:[s.jsxDEV("div",{className:"author-avatar",children:r(e.display_name)},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/browse/pages/Authors.jsx",lineNumber:88,columnNumber:11},void 0),s.jsxDEV("div",{className:"author-name",children:e.display_name},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/browse/pages/Authors.jsx",lineNumber:91,columnNumber:11},void 0),s.jsxDEV("div",{className:"author-count",children:[e.post_count," ",e.post_count===1?"post":"posts"]},void 0,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/browse/pages/Authors.jsx",lineNumber:92,columnNumber:11},void 0)]},e.id,!0,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/browse/pages/Authors.jsx",lineNumber:83,columnNumber:9},void 0))},void 0,!1,{fileName:"/Users/bipulkumar/Desktop/site_v2 copy/src/features/browse/pages/Authors.jsx",lineNumber:81,columnNumber:5},void 0)};export{k as default};
